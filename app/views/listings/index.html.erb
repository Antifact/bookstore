<!-- Navbar -->
<%= render "shared/navbar" %>

<header class="heading">
  <h1>Browse Listings</h1>
<header>

<!-- 
  The following is how each listing will be displayed in the /listings page. 
  Using bootstrap to style, each item will be inserted into a position in the row.
-->

<div class="row">
<% @listings.each do |listing| %>
  <div class="col-md-4">
    <div class="card mb-4 shadow-sm">

    <!-- 
      This checks to see if the listing has an image, and if it does, displays it with some bootstrap styling.
      This is done because during testing, there were listings without images. This will be updated later
     -->
      <% if listing.picture.attached? %>
        <%= image_tag listing.picture, alt: "image", class: "card-img-top" %>
      <% end %>

      <div class="card-body">
        <h4 class="card-title"><%= link_to listing.title, listing %></h4>
        <p class="card-text">$<%= listing.price %></p>
        <p class="card-text"><%= listing.description %></p>
        <div class="d-flex justify-content-between align-items-center">
          <div class="btn-group">
            <button type="button" class="btn btn-sm btn-outline-secondary"><%= link_to 'Show', listing %></button>
          </div>
          <small class="text-muted"><%= listing.created_at %> by <%= listing.user.username %></small>
        </div>
      </div>
    </div>
  </div>
<% end %>
</div>

<br>

<!-- A link to create a new listing -->
<%= link_to 'New Listing', new_listing_path %>

<!-- Footer -->
<%= render "shared/footer" %> 